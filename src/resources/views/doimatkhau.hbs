<div class='doimatkhau'>
  <div>
    {{>header}}
  </div>
  <div class='img_background_login'>
    <img
      src='https://cnm-lab3.s3.ap-southeast-1.amazonaws.com/hotrosinhvienIUH/bg_login.png'
    />
    <img
      class='img'
      src='https://cnm-lab3.s3.ap-southeast-1.amazonaws.com/hotrosinhvienIUH/favicon.png'
    />
    <div class="mainLogin col-6">
      <div class="row mainLoginKH">
        <div class='textLogin'>
          <h1>ĐỔI MẬT KHẨU</h1>
        </div>
         <img
          src='https://babycaredoan.s3.ap-southeast-1.amazonaws.com/changpass-removebg-preview.png'
          style="width: 200px;"
        />
          {{!-- <img
          src='https://babycaredoan.s3.ap-southeast-1.amazonaws.com/changpass.png'
          style="width: 250px;"
        /> --}}
        
        <div class='div_input'>
            <form class='form-login' action='/doimatkhau/{{accountId}}' method='POST'>
            <div class='form-group'>
              <label class='control-label'>Mật khẩu cũ<span
                  class='required'
                >(*)</span></label>
              <input
                class='input form-control'
                data-val='true'
                data-val-required='Nhập mật khẩu cũ'
                id='Old_Password'
                name='oldpassword'
                placeholder='Nhập mật khẩu cũ'
                type='password'
              />
            </div>

            <div class='form-group'>
              <label class='control-label'>Mật khẩu mới<span
                  class='required'
                >(*)</span></label>
              <input
                class='input form-control'
                data-val='true'
                data-val-required='Nhập mật khẩu mới'
                id='New_Password'
                name='newpassword'
                placeholder='Nhập mật khẩu mới'
                type='password'
              />
            </div>
            <div class='form-group'>
              <label class='control-label'>Xác nhận mật khẩu<span
                  class='required'
                >(*)</span></label>
              <input
                class='input form-control'
                data-val='true'
                data-val-required='Nhập xác nhận mật khẩu mới'
                id='Confirm_Password'
                name='renewpassword'
                placeholder='Xác nhận lại mật khẩu'
                type='password'
              />
            </div>
            <div class='Error'>
              {{#if messages.error}}
                <p style='color:red'>
                  {{messages.error}}
                </p>
              {{/if}}
            </div>
            <div class='form-group-action'>
              <input
                class='btn btn-action pull-right btn-primary'
                id='btnLuuMatKhau'
                type='submit'
                value="Lưu"
              ></input>
            </div>
          </form>
        </div>
         <div class='Error'>
              {{#if messages.success}}
                <input id="change-success" value="success" type="hidden" >
                </input>
              {{/if}}
          </div>

      </div>
    </div>
   

  </div>
</div>

<script>
  // step 1
  const ipnElement = document.querySelector('#Password')
  const btnElement = document.querySelector('#btnPassword')
  const iconEye = document.querySelector('#iconEye')

  const ipnElementRe = document.querySelector('#RePassword')
  const btnElementRe = document.querySelector('#btnRePassword')
  const iconEyeRe = document.querySelector('#iconEyeRe')

  // step 2
  btnElement.addEventListener('click', function() {
    // step 3
    const currentType = ipnElement.getAttribute('type')
    // step 4
    ipnElement.setAttribute(
      'type',
      currentType === 'password' ? 'text' : 'password'
    )

    if(currentType ==="password"){
      iconEye.classList.replace("fa-eye-slash", "fa-eye");
    }else{
      iconEye.classList.replace("fa-eye", "fa-eye-slash");
    }
  })

   btnElementRe.addEventListener('click', function() {
    // step 3
    const currentTypeRe = ipnElementRe.getAttribute('type')
    // step 4
    ipnElementRe.setAttribute(
      'type',
      currentTypeRe === 'password' ? 'text' : 'password'
    )

    if(currentTypeRe ==="password"){
      iconEyeRe.classList.replace("fa-eye-slash", "fa-eye");
    }else{
      iconEyeRe.classList.replace("fa-eye", "fa-eye-slash");
    }
  })
</script>

<script>
$(document).ready(function () { myFunction(); });
function myFunction() {
    if(document.getElementById("change-success").value){
        customAlert.alert('Chỉnh sửa mật khẩu thành công!.' )
    }
    
} 
function CustomAlert(){
  this.alert = function(message,title){
    document.body.innerHTML = document.body.innerHTML + '<div id="dialogoverlay"></div><div id="dialogbox" class="slit-in-vertical"><div><div id="dialogboxhead"></div><div id="dialogboxbody"></div><div id="dialogboxfoot"></div></div></div>';

    let dialogoverlay = document.getElementById('dialogoverlay');
    let dialogbox = document.getElementById('dialogbox');
    
    let winH = window.innerHeight;
    dialogoverlay.style.height = winH+"px";
    
    dialogbox.style.top = "100px";

    dialogoverlay.style.display = "block";
    dialogbox.style.display = "block";
    
    document.getElementById('dialogboxhead').style.display = 'block';

    if(typeof title === 'undefined') {
      document.getElementById('dialogboxhead').style.display = 'none';
    } else {
      document.getElementById('dialogboxhead').innerHTML = '<i class="fa fa-exclamation-circle" aria-hidden="true"></i> '+ title;
    }
    document.getElementById('dialogboxbody').innerHTML = message;
    {{!-- document.getElementById('dialogboxfoot').innerHTML = '<button class="pure-material-button-contained active" onclick="customAlert.ok()">OK</button>'; --}}
  }
  
  this.ok = function(){
    document.getElementById('dialogbox').style.display = "none";
    document.getElementById('dialogoverlay').style.display = "none";
  }

  setTimeout(function() {  
    document.getElementById('dialogbox').style.display = "none";
    document.getElementById('dialogoverlay').style.display = "none";
    }, 6000);
}

let customAlert = new CustomAlert();
</script>