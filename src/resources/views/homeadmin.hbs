<div class="homeadmin">
        {{>menubaradmin}}
        <div class="home-header-main">
            {{>headeradmin}}
            <div class="main-home-nv">
                <div class="title_chucnang">
                    <p>Quản lý bài đăng</p>
                </div>
                <div class="line" ></div>

                <div id="menu1" class="container tab-pane active div-table-list"><br />
                            <form action="" style="z-index: -100;position:absolute;">
                                <div class="card mb-4">
                                    <div class="card-header" style="color: #296088;font-weight: 600;" >
                                        <i class="fas fa-table me-1"></i>
                                        Bảng hiển thị danh sách tin
                                    </div>
                                    <div class="card-body">
                                        <table class="table table-bordered" id="table_id" style="font-size: 15px;width: 1500px;">
                                            <thead>
                                                <tr>
                                                    <th>STT</th>
                                                    <th>Mã tin</th>
                                                    <th>Tiêu đề bài viết</th>
                                                    <th>Ngày đăng</th>
                                                    <th>Mã tác giả</th>
                                                    <th>Tên tác giả</th>
                                                    <th>Trạng thái</th>
                                                    <th>Số lượng thích</th>
                                                    <th>Số lượng bình luận</th>
                                                    <th>Thao Tác</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                 {{#each array}}
                                                <tr>
                                                    <td>{{sum @index 1}}</td>
                                                    <td>{{this.idNewTemp}}</td>
                                                    <td>{{this.title}}</td>
                                                    <td>{{{changeNgay this.createdDate}}}</td>
                                                    <td>{{this.authorId}}</td>
                                                    <td>{{this.authorName}}</td>
                                                    {{#ifCond this.status '==' 0}} <td style="color: red;"> Chưa duyệt</td>  {{else}} <td style="color: green;"> Đã duyệt</td>  {{/ifCond}}
                                                    <td>{{this.countLike}}</td>
                                                    <td>{{this.countComment}}</td>
                                                    <td style="width: 220px;">
                                                      <a href="/admin/chitiettintuc/{{this.idNewTemp}}" class="btn btn-info" style="margin-right: 10px;">Xem Chi tiết</a>
                                                      <a href="/admin/xoatin/{{this.idNewTemp}}" onclick="return confirm ('Xoá tin {{this.title}} ?')" class="btn btn-danger">Xóa</a>
                                                    </td>
                                                </tr>
                                                {{/each}}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </form>
                        </div>
                
                
            </div>
            <div class='Error'>
              {{#if messages.success}}
                <input id="change-success" value="success" type="hidden" >
                </input>
              {{/if}}
            </div>
            <div class='Error'>
              {{#if messages.successdeletenew}}
                <input id="change-success-delete-new" value="successdeletenew" type="hidden" >
                </input>
              {{/if}}
            </div>
        </div>

 </div>
        

<script>
$(document).ready(function () { myFunction(); });
function myFunction() {
    if(document.getElementById("change-success").value){
        customAlertTin.alert('Duyệt tin thành công!.' )
    }
    
} 
function CustomAlert(){
  this.alert = function(message,title){
    document.body.innerHTML = document.body.innerHTML + '<div id="dialogoverlay"></div><div id="dialogbox" class="slit-in-vertical"><div><div id="dialogboxhead"></div><div id="dialogboxbody"></div><div id="dialogboxfoot"></div></div></div>';

    let dialogoverlay = document.getElementById('dialogoverlay');
    let dialogbox = document.getElementById('dialogbox');
    
    let winH = window.innerHeight;
    dialogoverlay.style.height = winH+"px";
    
    dialogbox.style.top = "100px";

    dialogoverlay.style.display = "block";
    dialogbox.style.display = "block";
    
    document.getElementById('dialogboxhead').style.display = 'block';

    if(typeof title === 'undefined') {
      document.getElementById('dialogboxhead').style.display = 'none';
    } else {
      document.getElementById('dialogboxhead').innerHTML = '<i class="fa fa-exclamation-circle" aria-hidden="true"></i> '+ title;
    }
    document.getElementById('dialogboxbody').innerHTML = message;
    {{!-- document.getElementById('dialogboxfoot').innerHTML = '<button class="pure-material-button-contained active" onclick="customAlert.ok()">OK</button>'; --}}
  }
  
  this.ok = function(){
    document.getElementById('dialogbox').style.display = "none";
    document.getElementById('dialogoverlay').style.display = "none";
  }

  setTimeout(function() {  
    document.getElementById('dialogbox').style.display = "none";
    document.getElementById('dialogoverlay').style.display = "none";
    }, 3000);
}

let customAlertTin = new CustomAlert();
</script>

<script>
$(document).ready(function () { myFunction(); });
function myFunction() {
    if(document.getElementById("change-success-delete-new").value){
        customAlertDeleteTin.alert('Xoá tin thành công!.' )
    }
    
} 
function CustomAlertDel(){
  this.alert = function(message,title){
    document.body.innerHTML = document.body.innerHTML + '<div id="dialogoverlay"></div><div id="dialogbox" class="slit-in-vertical"><div><div id="dialogboxhead"></div><div id="dialogboxbody"></div><div id="dialogboxfoot"></div></div></div>';

    let dialogoverlay = document.getElementById('dialogoverlay');
    let dialogbox = document.getElementById('dialogbox');
    
    let winH = window.innerHeight;
    dialogoverlay.style.height = winH+"px";
    
    dialogbox.style.top = "100px";

    dialogoverlay.style.display = "block";
    dialogbox.style.display = "block";
    
    document.getElementById('dialogboxhead').style.display = 'block';

    if(typeof title === 'undefined') {
      document.getElementById('dialogboxhead').style.display = 'none';
    } else {
      document.getElementById('dialogboxhead').innerHTML = '<i class="fa fa-exclamation-circle" aria-hidden="true"></i> '+ title;
    }
    document.getElementById('dialogboxbody').innerHTML = message;
    {{!-- document.getElementById('dialogboxfoot').innerHTML = '<button class="pure-material-button-contained active" onclick="customAlert.ok()">OK</button>'; --}}
  }
  
  this.ok = function(){
    document.getElementById('dialogbox').style.display = "none";
    document.getElementById('dialogoverlay').style.display = "none";
  }

  setTimeout(function() {  
    document.getElementById('dialogbox').style.display = "none";
    document.getElementById('dialogoverlay').style.display = "none";
    }, 3000);
}

let customAlertDeleteTin = new CustomAlertDel();
</script>
        
