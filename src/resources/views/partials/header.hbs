<div class='navbar-expand-lg header'>
  <div class='row container-header'>
    <div class='col-4 left-bar row'>
      <div class='col-3 divHinhAnh'>
        <img
          src='https://babycaredoan.s3.ap-southeast-1.amazonaws.com/logo.png'
          alt='ảnh thẻ header'
          style='height: 50px;width: 51px;'
        />
      </div>
      <div class='row btnTinTuc col-9'>
        <div class='btnTinTucMain'></div>
        {{#ifCond role '==' 2}}
          <a class='' href='/home'>
            <p>Tin Tức</p>
          </a>
          <a class='' href='/cvtvsk/listchat' style='margin-left: 20px;'>
            <p>Danh sách tin nhắn</p>
          </a>
        {{else}}
          <a class='' href='/home'>
            <p>Tin Tức</p>
          </a>
        {{/ifCond}}
      </div>
    </div>

    <div class='row col-5 search-bar'>
      <div class='div-search-bar'>
      </div>
      <form action='/timkiemtin' method='POST'>
        <input
          type='text'
          id='searchHeader'
          name='content'
          placeholder='Tìm kiếm bài viết...'
          required=''
        />
        <button type='submit'><i
            class='fa fa-search'
            aria-hidden='true'
          ></i></button>
      </form>

    </div>
    <div
      class='col-3 collapse navbar-collapse right-bar'
      id='navbarSupportedContent'
    >
      <div class='header-left'>
        <ul class='row navbar-nav mr-auto nav-header'>
          <div class='btnTinTucMain'></div>
            {{#if role }}
            {{else}}
              <li class='nav-item active' style='margin-right: 15px;'>
                <a class='nav-link' href='/login'>
                  <p>Đăng nhập</p>
                </a>
              </li>
            {{/if}}
          <li class='nav-item active' style='margin-right: 15px;'>
            <a class='nav-link' href='/dangtin'>
              <p> <i class='fa fa-pencil'></i></p>
              <span class='sr-only'>(current)</span>
            </a>
          </li>
          <li class='nav-item active' style='margin-right: 15px;'>
            <a  class='nav-link '
                href='#'
                id='navbarDropdown'
                role='button'
                data-toggle='dropdown'
                aria-haspopup='true'
                aria-expanded='false'
                style="position: relative;"
              >
              {{#if countCommentRead}}
                <div class='numberCart'>
                  <span>{{countCommentRead}}</span>
                </div>
              {{/if}}
              <p> <i class='fa fa-bell-o'></i></p>
              <span class='sr-only'>(current)</span>
              <div class='dropdown-menu'>
                  <span class='dropdown-item' href='/cvtvsk/listchat'>
                    Thông báo</span>
                  <div class='dropdown-divider'></div>
                   <a class='dropdown-item' href='/thongtincanhan'>Thông tin cá
                    nhân</a>
                    <div class='dropdown-divider'></div>
                  {{!-- <button class='dropdown-item js-doi-mat-khau-ql'>Đổi mật khẩu</button> --}}
                  <a class="dropdown-item" href="/doimatkhau">Đổi mật khẩu</a> 
                  <div class='dropdown-divider'></div>
                  <a
                    class='dropdown-item'
                    style='color: red;'
                    href='/login'
                  >Đăng xuất</a>
                </div>
            </a>
          </li>

          {{#if avatar}}
            <li class='nav-item dropdown row' style='margin-left:20px'>
              <img
                src={{avatar}}
                alt='ảnh thẻ header'
                style='height: 30px;width: 31px; border-radius:20px;  margin-top:5px'
              />
              <a
                class='nav-link dropdown-toggle'
                href='#'
                id='navbarDropdown'
                role='button'
                data-toggle='dropdown'
                aria-haspopup='true'
                aria-expanded='false'
                style='margin-right: 30px; margin-top:-5px'
              >
                {{username}}
              </a>
              {{#ifCond role '==' 2}}
                <div class='dropdown-menu'>
                  <a class='dropdown-item' href='/cvtvsk/listchat'>
                    Danh sách tin nhắn</a>
                  <div class='dropdown-divider'></div>
                   <a class='dropdown-item' href='/thongtincanhan'>Thông tin cá
                    nhân</a>
                    <div class='dropdown-divider'></div>
                  {{!-- <button class='dropdown-item js-doi-mat-khau-ql'>Đổi mật khẩu</button> --}}
                  <a class="dropdown-item" href="/doimatkhau">Đổi mật khẩu</a> 
                  <div class='dropdown-divider'></div>
                  <a
                    class='dropdown-item'
                    style='color: red;'
                    href='/login'
                  >Đăng xuất</a>
                </div>
              {{else}}
                <div class='dropdown-menu'>
                  <a class='dropdown-item' href='/thongtincanhan'>Thông tin cá
                    nhân</a>
                  <div class='dropdown-divider'></div>
                  <a class='dropdown-item' href='/guitinnhan'>
                    Tin nhắn</a>
                  <div class='dropdown-divider'></div>
                  <a class='dropdown-item' href='/dangtin'>Bài viết</a>
                  <div class='dropdown-divider'></div>
                  {{!-- <button class='dropdown-item js-doi-mat-khau-ql'>Đổi mật khẩu</button> --}}
                  <a class="dropdown-item" href="/doimatkhau">Đổi mật khẩu</a> 
                  <div class='dropdown-divider'></div>
                  <a
                    class='dropdown-item'
                    style='color: red;'
                    href='/login'
                  >Đăng xuất</a>
                </div>
              {{/ifCond}}

            </li>
          {{/if}}
        </ul>
      </div>
    </div>

    {{! Model }}
    <div class='model-header-ql js-model-header-ql'>
      <div class='container-model'>
        <div class='icon-close-header-model' style='text-right'>
          <i
            class='js-model-close-ql fa fa-window-close'
            style='color: #078c80;'
          >
          </i>
        </div>
        <div class='main-doi-mat-khau-header'>
          <form class='form-login' action='/doimatkhau/{{accountId}}' method='POST'>
            <div class='form-group'>
              <label class='control-label'>Mật khẩu cũ<span
                  class='required'
                >(*)</span></label>
              <input
                class='input form-control'
                data-val='true'
                data-val-required='Nhập mật khẩu cũ'
                id='Old_Password'
                name='oldpassword'
                placeholder='Nhập mật khẩu cũ'
                type='password'
              />
            </div>

            <div class='form-group'>
              <label class='control-label'>Mật khẩu mới<span
                  class='required'
                >(*)</span></label>
              <input
                class='input form-control'
                data-val='true'
                data-val-required='Nhập mật khẩu mới'
                id='New_Password'
                name='newpassword'
                placeholder='Nhập mật khẩu mới'
                type='password'
              />
            </div>
            <div class='form-group'>
              <label class='control-label'>Xác nhận mật khẩu<span
                  class='required'
                >(*)</span></label>
              <input
                class='input form-control'
                data-val='true'
                data-val-required='Nhập xác nhận mật khẩu mới'
                id='Confirm_Password'
                name='renewpassword'
                placeholder='Xác nhận lại mật khẩu'
                type='password'
              />
            </div>
            <div class='Error'>
              {{#if messages.error}}
                <p style='color:red'>
                  {{messages.error}}
                </p>
              {{/if}}
            </div>
            <div class='actions'>
              <input
                class='btn btn-action pull-right btn-primary'
                id='btnLuuMatKhau'
                type='submit'
                value="Lưu"
              ></input>
            </div>
          </form>
          <div class='Error'>
              {{#if messages.success}}
                <input id="change-success" value="success" type="hidden" >
                </input>
              {{/if}}
          </div>

        </div>
      </div>
    </div>
  </div>
</div>
<script>
  const btnDoiMatKhau = document.querySelectorAll(".js-doi-mat-khau-ql"); const
  modelHeader = document.querySelector(".js-model-header-ql"); const
  btnModelClose = document.querySelector(".js-model-close-ql"); function
  showDoiMatKhau() { modelHeader.classList.add("open"); } function
  hideDoiMatKhau() { modelHeader.classList.remove("open"); } for (const
  btnXemLich of btnDoiMatKhau) { btnXemLich.addEventListener("click",
  showDoiMatKhau); } btnModelClose.addEventListener('click', hideDoiMatKhau);
</script>


<script>
$(document).ready(function () { myFunction(); });
function myFunction() {
    if(document.getElementById("change-success").value){
        customAlert.alert('Chỉnh sửa mật khẩu thành công!.' )
    }
    
} 
function CustomAlert(){
  this.alert = function(message,title){
    document.body.innerHTML = document.body.innerHTML + '<div id="dialogoverlay"></div><div id="dialogbox" class="slit-in-vertical"><div><div id="dialogboxhead"></div><div id="dialogboxbody"></div><div id="dialogboxfoot"></div></div></div>';

    let dialogoverlay = document.getElementById('dialogoverlay');
    let dialogbox = document.getElementById('dialogbox');
    
    let winH = window.innerHeight;
    dialogoverlay.style.height = winH+"px";
    
    dialogbox.style.top = "100px";

    dialogoverlay.style.display = "block";
    dialogbox.style.display = "block";
    
    document.getElementById('dialogboxhead').style.display = 'block';

    if(typeof title === 'undefined') {
      document.getElementById('dialogboxhead').style.display = 'none';
    } else {
      document.getElementById('dialogboxhead').innerHTML = '<i class="fa fa-exclamation-circle" aria-hidden="true"></i> '+ title;
    }
    document.getElementById('dialogboxbody').innerHTML = message;
    {{!-- document.getElementById('dialogboxfoot').innerHTML = '<button class="pure-material-button-contained active" onclick="customAlert.ok()">OK</button>'; --}}
  }
  
  this.ok = function(){
    document.getElementById('dialogbox').style.display = "none";
    document.getElementById('dialogoverlay').style.display = "none";
  }

  setTimeout(function() {  
    document.getElementById('dialogbox').style.display = "none";
    document.getElementById('dialogoverlay').style.display = "none";
    }, 1000);
}

let customAlert = new CustomAlert();
</script>

<script>
  $(document).ready(function () { OnChangePassword(); }); function
  OnChangePassword() { $('#btnLuuMatKhau').click(function () { var old_password
  = $('input[name="Old_Password"]').val(); var new_password =
  $('input[name="New_Password"]').val(); var confirm_password =
  $('input[name="Confirm_Password"]').val(); if (old_password == "" ||
  new_password == "" || confirm_password == "") { alert("Vui lòng nhập đủ thông
  tin !"); } else if (new_password.localeCompare(confirm_password)) { alert("Mật
  khẩu không khớp !"); } else { $.ajax({ url: '/quanly/capnhatmatkhau', type:
  'post', data: { old_password: old_password, confirm_password: confirm_password
  }, dataType: 'json', success: function (result) { alert("Cập nhật thành công
  !"); hideDoiMatKhau(); }, error: function (result) { alert("Mật khẩu cũ không
  hợp lệ !"); } }); } }); }
</script>

<script>
  // step 1 const ipnElement = document.querySelector('#Password') const
  btnElement = document.querySelector('#btnPassword') const iconEye =
  document.querySelector('#iconEye') // step 2
  btnElement.addEventListener('click', function() { // step 3 const currentType
  = ipnElement.getAttribute('type') // step 4 ipnElement.setAttribute( 'type',
  currentType === 'password' ? 'text' : 'password' ) if(currentType
  ==="password"){ iconEye.classList.replace("fa-eye-slash", "fa-eye"); }else{
  iconEye.classList.replace("fa-eye", "fa-eye-slash"); } })
</script>